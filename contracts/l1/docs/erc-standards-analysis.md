# ERC 표준 준수 분석 보고서

## EV 충전 인프라 STO 프로젝트 — 스마트 컨트랙트별 ERC 표준 매핑

2026.02.25 | 기밀

---

## 1. 분석 계획 및 접근 방식

본 보고서는 다음의 순서로 진행됩니다.

첫째, 현재 정의된 9개 스마트 컨트랙트 각각에 대해 **준수해야 할 ERC 표준**을 식별합니다. 특히 2027년 1월 전자증권법 시행에 맞춰 STO 토큰 증권이 법적으로 검증·유통되기 위한 표준 준수가 핵심입니다.

둘째, 현재 설계에서 **불필요하거나 통합 가능한 컨트랙트**를 식별합니다.

셋째, 현재 아키텍처에 **추가가 필요한 컨트랙트 또는 기능**을 제안합니다.

핵심 전제 조건:

- Avalanche L1 (EVM 호환) 프라이빗 체인 환경
- 한국 전자증권법(2027.01 시행) 준수 필수
- 증권사를 통한 독점 유통 구조
- STO 토큰은 규제 증권이므로, **허가형(permissioned) 전송 제한**이 반드시 필요

---

## 2. 핵심 ERC 표준 개요 (STO 관련)

본 프로젝트에서 검토해야 할 주요 표준들을 먼저 정리합니다.

### ERC-3643 (T-REX) — 규제 증권 토큰 표준 ⭐ 최우선 권고

ERC-3643은 규제 증권의 토큰화를 위해 설계된 **Ethereum Final 표준**(2023.12 최종 확정)입니다. ERC-20를 확장하되, 온체인 신원 관리(ONCHAINID), 모듈형 컴플라이언스 규칙, 허가형 전송 등을 내장합니다. 토큰 수준에서 KYC/AML 검증, 관할권 제한, 최대 보유자 수 제한, 락업(lockup) 등을 강제할 수 있습니다. 토큰 발행자(또는 대리인)가 강제 전송(forced transfer), 토큰 동결, 분실 지갑 복구 등 증권 수명주기 관리를 수행할 수 있습니다. **대한민국 STO 환경에서 가장 적합한 표준으로 판단됩니다.**

### ERC-1400 (Security Token Standard) — 대안 후보

ERC-1400은 Polymath에서 제안한 우산 표준(umbrella standard)으로, ERC-1410(파티션), ERC-1594(핵심 기능), ERC-1643(문서 관리), ERC-1644(강제 전송)를 포함합니다. 파티션(tranche) 기능이 강력하지만, 여전히 Draft 상태이며 ERC-3643 대비 생태계 지원이 제한적입니다.

### ERC-20 — 기초 토큰 표준

기본 대체 가능(fungible) 토큰 표준입니다. STO 토큰에 단독 사용 시 전송 제한이 없어 **규제 요건을 충족할 수 없습니다.** 반드시 상위 표준(ERC-3643 또는 ERC-1400)으로 확장해야 합니다.

### ERC-721 — 비대체 가능 토큰(NFT) 표준

개별 식별이 필요한 데이터 레코드(충전 세션, 탄소 감축 기록 등)에 적합합니다.

### ERC-2222 — 자금 분배 표준(Funds Distribution Token)

ERC-20를 확장하여 배당, 수익 분배 등 미래 현금 흐름에 대한 청구권을 표현합니다. RegionSTO의 충전 수익 분배 메커니즘에 직접 적용 가능합니다.

### ERC-8004 — Trustless Agents (영감 원천)

AI 에이전트의 온체인 신원·평판·검증을 위한 표준입니다(2026.01 메인넷 배포). 이 프로젝트에서는 CPO 평판 시스템의 **Reputation Registry 패턴**에서 영감을 받았습니다. 직접 준수 대상은 아니지만, 피드백 신호 구조와 온체인 평판 점수 저장 방식을 차용할 수 있습니다.

---

## 3. 컨트랙트별 ERC 표준 매핑

### Contract 1: StationRegistry

| 항목 | 내용 |
|------|------|
| 카테고리 | A: 물리 인프라 |
| 현재 Token Std | N/A |
| **권고 ERC 표준** | **ERC-165 (인터페이스 감지)** |
| 추가 권고 | OpenZeppelin AccessControl (RBAC) |

StationRegistry는 토큰을 발행하지 않는 순수 레지스트리 컨트랙트이므로 토큰 표준 준수는 불필요합니다. 다만 다른 컨트랙트들이 이 레지스트리의 인터페이스를 프로그래밍 방식으로 감지할 수 있도록 **ERC-165 (Standard Interface Detection)**를 구현하는 것을 권고합니다.

Region→CPO→Station→Charger 계층 구조가 전체 시스템의 근간이므로, 역할 기반 접근 제어(RBAC)를 통해 등록/변경 권한을 엄격히 관리해야 합니다.

**판정: 현행 설계 유지. 필수 존재.**

---

### Contract 2: ChargeTransaction

| 항목 | 내용 |
|------|------|
| 카테고리 | B: 충전 데이터 & 탄소 |
| 현재 Token Std | ERC-721 |
| **권고 ERC 표준** | **ERC-721 유지** 또는 **ERC-1155로 전환 검토** |
| 추가 권고 | ERC-721Metadata, ERC-165 |

충전 세션마다 고유한 데이터 레코드를 발행하므로 ERC-721이 논리적으로 적합합니다. 각 토큰이 개별 충전 이벤트의 불변 증거 역할을 합니다.

다만, 충전 세션 수가 수십만~수백만 건에 달할 것으로 예상되므로 가스 효율성 관점에서 **ERC-1155**로의 전환도 검토할 만합니다. ERC-1155는 배치 민팅을 지원하여 대량 발행 시 효율적이며, Avalanche L1 프라이빗 체인(가스비=0)에서는 가스비가 쟁점이 아니므로 **ERC-721 유지가 더 명확합니다.**

VVB 감사자가 개별 충전 기록을 독립적으로 검증해야 하므로, 각 토큰의 메타데이터(kWh, 타임스탬프, SE 서명 등)에 접근 가능한 ERC-721Metadata 확장이 필요합니다.

**판정: ERC-721 유지 권고. 프라이빗 체인 환경에서 개별 식별성이 가스 효율보다 중요.**

---

### Contract 3: CarbonReduction

| 항목 | 내용 |
|------|------|
| 카테고리 | B: 충전 데이터 & 탄소 |
| 현재 Token Std | ERC-721 |
| **권고 ERC 표준** | **ERC-721 유지** |
| 추가 권고 | ERC-721Metadata, ERC-165 |
| 특이사항 | **Immutable(업그레이드 불가) 배포** |

각 충전 세션에 대한 탄소 감축 계산 결과를 개별 토큰으로 발행하므로 ERC-721이 적합합니다. ChargeTransaction과 1:1 참조 관계를 유지하며, VM0038 공식 적용의 일관성을 증명합니다.

불변 바이트코드로 배포되는 설계는 VVB 검증에 핵심적이므로, 업그레이드 프록시 패턴을 적용하면 안 됩니다. 방법론이 개정되면 새 버전의 컨트랙트를 별도 배포하는 현재 설계가 올바릅니다.

**판정: 현행 설계 유지. ERC-721 + Immutable 배포 조합이 적절.**

---

### Contract 4: ParameterRegistry

| 항목 | 내용 |
|------|------|
| 카테고리 | B: 충전 데이터 & 탄소 |
| 현재 Token Std | N/A |
| **권고 ERC 표준** | **ERC-165** |
| 추가 권고 | OpenZeppelin AccessControl, 버전 관리 패턴 |

토큰 발행이 없는 파라미터 저장소이므로 토큰 표준 준수는 불필요합니다. 파라미터 변경 이력의 시간적 상관관계가 VVB 감사에 핵심이므로, 변경 이벤트 로깅과 버전 관리가 가장 중요합니다.

**판정: 현행 설계 유지.**

---

### Contract 5: CarbonBatch

| 항목 | 내용 |
|------|------|
| 카테고리 | C: 탄소 시장 파이프라인 |
| 현재 Token Std | N/A |
| **권고 ERC 표준** | **없음** (순수 상태 관리 컨트랙트) |
| 추가 권고 | 이벤트 기반 감사 추적 |

배치 그룹핑 및 이중 계산 방지를 위한 상태 관리 컨트랙트입니다. 토큰을 발행하지 않으므로 토큰 표준은 불필요합니다. batch locking의 비가역성이 핵심이므로, 상태 전이 이벤트 로깅(BatchCreated, BatchLocked, BatchVerified)이 중요합니다.

**판정: 현행 설계 유지.**

---

### Contract 6: VCUReference

| 항목 | 내용 |
|------|------|
| 카테고리 | C: 탄소 시장 파이프라인 |
| 현재 Token Std | N/A |
| **권고 ERC 표준** | **없음** (오프체인 결과의 온체인 기록) |
| 추가 권고 | Append-only 패턴, 이벤트 로깅 |

Verra VCU 발행 결과를 온체인에 기록하는 참조 컨트랙트입니다. 외부 권위체(Verra)의 결정을 기록하므로, CarbonBatch와의 분리가 올바릅니다.

**판정: 현행 설계 유지.**

---

### Contract 7: ReputationRegistry

| 항목 | 내용 |
|------|------|
| 카테고리 | D: 투자 & 운영 |
| 현재 Token Std | N/A |
| **권고 ERC 표준** | **ERC-8004의 Reputation Registry 패턴 차용** |
| 추가 권고 | Oracle 패턴, ERC-165 |

ERC-8004의 Reputation Registry에서 영감을 받은 설계입니다. ERC-8004의 핵심 구조를 차용하되, AI 에이전트가 아닌 CPO 운영 품질에 맞게 적응시킵니다.

구체적으로 차용할 ERC-8004 요소는 다음과 같습니다.

- **피드백 신호 구조**: value(점수), tag(업타임/고장빈도/평균수리시간 등의 카테고리)를 온체인에 저장하여 다른 스마트 컨트랙트가 프로그래밍 방식으로 참조 가능하게 합니다.
- **온체인 최소주의**: 핵심 평판 신호만 온체인에 저장하고, 상세 분석은 오프체인에서 수행합니다(현재 설계의 oracle 패턴과 일치).
- **공개 평판 데이터**: 평판 점수를 공개 데이터로 취급하여, STO 투자자가 리전 수준의 운영 품질을 투명하게 평가할 수 있게 합니다.

다만, ERC-8004의 Identity Registry(ERC-721 기반 에이전트 신원)와 Validation Registry는 본 프로젝트에 불필요합니다. CPO 신원은 StationRegistry에서 이미 관리되고 있기 때문입니다.

**판정: 현행 설계 유지. ERC-8004 Reputation Registry 패턴의 선택적 차용 권고.**

---

### Contract 8: STOPortfolio

| 항목 | 내용 |
|------|------|
| 카테고리 | D: 투자 & 운영 |
| 현재 Token Std | N/A |
| **권고 ERC 표준** | **없음** (뷰/쿼리 전용 컨트랙트) |
| 추가 권고 | ERC-165 |

투자자 지갑과 리전별 STO 보유량을 매핑하고 집계 조회를 제공하는 컨트랙트입니다.

**⚠️ 설계 재검토 필요**: 이 컨트랙트의 기능 상당 부분이 ERC-3643 또는 RegionSTO 컨트랙트 자체에서 처리 가능합니다. ERC-20 기반 토큰의 balanceOf, 이벤트 로그 등으로 보유량 조회가 가능하고, 멀티 리전 보유 현황은 오프체인 인덱서(The Graph 등)로 효율적으로 집계할 수 있습니다.

다만, 증권사와의 인터페이스 역할(배당 계산, 투자자 리포팅용 표준 쿼리 제공)이 명확하므로, **오프체인 인덱서로 대체하기보다는 온체인 집계 뷰로 유지하되 경량화하는 것을 권고합니다.** 증권사가 온체인 데이터를 직접 참조해야 하는 규제 환경에서는 온체인 쿼리 인터페이스가 가치를 가집니다.

**판정: 유지하되 경량화 검토. 핵심 쿼리 함수만 남기고, 복잡한 집계는 오프체인으로 위임.**

---

### Contract 9: STO Token (RegionSTO) ⭐ 가장 중요

| 항목 | 내용 |
|------|------|
| 카테고리 | D: 투자 & 운영 |
| 현재 Token Std | ERC-20 Mintable |
| **권고 ERC 표준** | **ERC-3643 (T-REX)** ⭐ |
| 필수 하위 표준 | ERC-20 (하위 호환), ERC-165 |
| 필수 하위 표준 | ERC-20 (하위 호환), ERC-165 |

**이 컨트랙트가 전체 프로젝트에서 ERC 표준 준수의 핵심입니다.** STO 토큰 증권이 법적으로 검증되고 유통되기 위해서는 반드시 규제 증권 토큰 표준을 준수해야 합니다.

#### 왜 ERC-3643인가 (ERC-20 단독 사용이 안 되는 이유)

현재 설계에서 "ERC-20 Mintable"로 명시되어 있으나, 이는 **STO 규제 요건을 충족하지 못합니다.**

- **전송 제한 부재**: 일반 ERC-20은 아무나 토큰을 전송할 수 있습니다. 증권법상 적격 투자자만 보유할 수 있어야 합니다.
- **KYC/AML 미지원**: 투자자 신원 검증 없이 토큰이 유통되면 불법입니다.
- **강제 전송 불가**: 법원 명령, 규제 조치 등에 따른 강제 이전이 불가능합니다.
- **지갑 복구 불가**: 투자자가 개인키를 분실하면 증권 자산이 영구 소실됩니다.

#### ERC-3643이 제공하는 필수 기능

- **허가형 전송**: 전송 시 온체인 컴플라이언스 검증을 거칩니다. 검증 실패 시 전송이 거부됩니다.
- **ONCHAINID 연동**: 각 투자자의 온체인 신원에 KYC/AML 클레임이 연결됩니다. 증권사가 Trusted Issuer로서 클레임을 발행합니다.
- **모듈형 컴플라이언스**: 국내 투자자 제한, 최대 보유자 수, 락업 기간 등을 모듈로 구성하여 규칙 변경 시 토큰 재배포 없이 업데이트할 수 있습니다.
- **강제 전송 및 동결**: 규제 조치에 따라 발행자/대리인이 토큰을 강제 이전하거나 동결할 수 있습니다.
- **지갑 복구**: 투자자가 개인키를 분실한 경우, 발행자가 새 지갑으로 토큰을 복구할 수 있습니다.
- **ERC-20 하위 호환**: 기존 ERC-20 인프라(지갑, 거래소 등)와 호환됩니다.

#### ERC-2222 (배당 분배) — 제외 결정

~~문서에서 RegionSTO의 핵심 기능으로 "리전 내 모든 충전기 수익이 토큰 보유자에게 비례 분배"라고 명시하고 있습니다.~~ 검토 결과, 개정 전자증권법 및 자본시장법 체계에서 **배당 계산·집행은 증권사(장외거래중개업자)의 영역**이며, 발행인(발행인계좌관리기관)은 토큰 발행과 인프라 데이터 관리에 한정됩니다. 따라서 온체인 배당 분배 메커니즘(ERC-2222)은 발행인의 역할 범위를 벗어나므로 **제외합니다.**

회사의 온체인 역할은 충전 수익 데이터를 기록·제공하는 것까지이며, 이 데이터를 기반으로 한 배당 계산과 투자자 지급은 증권사가 독립적으로 수행합니다.

#### ERC-1643 (문서 관리) — 제외 결정

투자설명서, 정관, 감사 보고서 등의 법적 문서 관리 역시 **증권사의 유통·관리 영역**에 해당합니다. 발행인으로서 온체인에 문서 URI/해시를 저장할 법적 의무나 실익이 현재 확인되지 않으므로 **제외합니다.**

#### 최종 확정 구조

```
RegionSTO = ERC-3643 (허가형 전송 + 컴플라이언스)
           + Dynamic Supply (Mintable, 기존 설계 유지)
```

- ~~ERC-2222~~: 배당 계산·집행은 증권사 영역 (발행인은 수익 데이터만 온체인 제공)
- ~~ERC-1643~~: 문서 관리는 증권사 영역

**판정: ERC-20 Mintable → ERC-3643 + Dynamic Supply로 업그레이드 필수.**

---

## 4. 추가 필요 컨트랙트 제안

현재 9개 컨트랙트에 추가가 필요하다고 판단되는 요소들입니다.

### 신규 제안 1: IdentityRegistry (ERC-3643 필수 구성 요소)

ERC-3643을 채택하면 ONCHAINID 기반의 Identity Registry가 필수적으로 수반됩니다. 이는 별도 컨트랙트로 배포되며 다음을 관리합니다.

- 투자자 지갑 주소 ↔ 온체인 신원(ONCHAINID) 매핑
- 증권사가 발행하는 KYC/AML 클레임 검증
- 적격 투자자 여부 확인

현재 아키텍처에 명시되어 있지 않으므로 추가해야 합니다.

### 신규 제안 2: ComplianceModule (ERC-3643 필수 구성 요소)

ERC-3643의 모듈형 컴플라이언스 컨트랙트입니다. 전송 규칙을 독립적으로 관리합니다.

- 국내 투자자만 허용 (관할권 제한)
- 리전별 최대 보유자 수 제한
- 신규 발행 후 락업 기간 설정
- 일일/월간 전송 한도

이 모듈은 규칙 변경 시 RegionSTO 토큰 재배포 없이 업데이트할 수 있어야 합니다.

### 신규 제안 3: TrustedIssuersRegistry (ERC-3643 필수 구성 요소)

증권사 등 신뢰할 수 있는 클레임 발행자의 주소를 관리하는 레지스트리입니다. 어떤 기관이 KYC 클레임을 발행할 수 있는지 정의합니다.

---

## 5. 불필요하거나 재설계 필요 항목

### STOPortfolio (Contract 8) — 경량화 필요

앞서 언급했듯이, ERC-3643 기반 RegionSTO 도입 시 상당 부분의 기능이 중복됩니다. 다만 증권사 인터페이스 역할이 있으므로 제거보다는 경량화를 권고합니다. 복잡한 집계 로직은 오프체인 인덱서(The Graph 등)로 위임하고, 온체인에는 증권사가 참조하는 핵심 뷰 함수만 남겨두는 방향입니다.

### ERC-3643 도입으로 인한 구조 변화

RegionSTO를 ERC-3643으로 전환하면, 다음의 하위 컨트랙트들이 자동으로 추가됩니다. 이들은 ERC-3643의 필수 구성요소이므로, 총 컨트랙트 수가 증가합니다.

- Token Contract (RegionSTO 자체, 리전당 1개 × 17개)
- Identity Registry (1개, 전체 공유)
- Identity Registry Storage (1개, 업그레이드 가능성을 위해 분리)
- Trusted Issuers Registry (1개)
- Claim Topics Registry (1개)
- Compliance Contract (리전당 1개 또는 공유)

---

## 6. 최종 ERC 표준 매핑 요약

| # | 컨트랙트 | ERC 표준 | 필수/권고 | 비고 |
|---|---------|---------|----------|------|
| 1 | StationRegistry | ERC-165 | 권고 | 토큰 미발행, RBAC 필수 |
| 2 | ChargeTransaction | **ERC-721** + Metadata | 필수 | 개별 충전 기록 NFT |
| 3 | CarbonReduction | **ERC-721** + Metadata | 필수 | 불변 배포, VM0038 증거 |
| 4 | ParameterRegistry | ERC-165 | 권고 | 버전 관리 + 이벤트 로깅 |
| 5 | CarbonBatch | — | — | 상태 관리 전용 |
| 6 | VCUReference | — | — | Append-only 기록 |
| 7 | ReputationRegistry | ERC-8004 패턴 차용 | 권고 | 피드백 신호 구조 차용 |
| 8 | STOPortfolio | ERC-165 | 권고 | 경량화 검토 필요 |
| 9 | **RegionSTO** | **ERC-3643** + Dynamic Supply | **필수** ⭐ | 현 ERC-20에서 업그레이드 필수. ~~ERC-2222~~ (배당은 증권사 영역), ~~ERC-1643~~ (문서 관리는 증권사 영역) |
| 신규 | ERC-3643 하위 컨트랙트 | IIdentityRegistry, ICompliance, ITrustedIssuersRegistry, IClaimTopicsRegistry | **인터페이스만 정의** | Phase 1에서 인터페이스 정의, 증권사 협의 후 Phase 2~3에서 구현 |

---

## 7. 한국 전자증권법과의 정합성

2026년 1월 국회를 통과한 전자증권법 개정안은 다음을 요구합니다.

- **적격 발행자(qualified issuer)만 토큰 증권 직접 발행 가능**: ERC-3643의 Agent/Owner 역할 체계로 구현 가능
- **인가 증권사를 통한 독점 유통**: ERC-3643의 컴플라이언스 모듈에서 증권사 경유 전송만 허용하도록 규칙 설정 가능
- **분산원장 기반 계좌 관리 시스템**: ERC-3643의 Identity Registry가 이 역할을 수행
- **스마트 컨트랙트의 적극적 활용 기대**: FSC가 명시적으로 스마트 컨트랙트 활용 확대를 언급

ERC-3643 채택은 이러한 요건들과 높은 정합성을 보이며, 특히 증권사가 Trusted Issuer로서 KYC 클레임을 발행하고 컴플라이언스 규칙을 관리하는 구조는 한국의 "증권사 독점 유통" 모델에 잘 맞습니다.

---

## 8. 발행인-증권사 역할 분담 (규제 기반)

개정 전자증권법 및 자본시장법에 따라, 발행인과 증권사의 역할이 명확히 구분됩니다.

| 역할 | 주체 | 온체인 범위 |
|------|------|-----------|
| 토큰 발행 (민팅) | **발행인 (회사)** | RegionSTO.mint(), RegionSTOFactory |
| 충전 수익 데이터 기록 | **발행인 (회사)** | ChargeTransaction, STOPortfolio (수익 데이터 뷰) |
| 인프라 데이터 관리 | **발행인 (회사)** | StationRegistry, ParameterRegistry, ReputationRegistry |
| KYC/AML, 투자자 적격성 심사 | **증권사** | IdentityRegistry (운영 주체: 증권사) |
| 토큰 유통·매매·중개 | **증권사** | ComplianceModule (규칙 설정: 증권사) |
| 배당 계산·집행 | **증권사** | 오프체인 (온체인 수익 데이터 참조) |
| 투자 문서 관리 | **증권사** | 오프체인 |

이 역할 분담이 ERC-2222(배당 분배)와 ERC-1643(문서 관리)을 RegionSTO에서 제외하는 근거입니다.

---

## 9. 구현 우선순위 권고

**Phase 1 (즉시, ~2026.05)**: StationRegistry, ChargeTransaction(ERC-721), CarbonReduction(ERC-721), ParameterRegistry — 현행 설계대로 진행. **ERC-3643 인터페이스 정의** (IIdentityRegistry, ICompliance, ITrustedIssuersRegistry, IClaimTopicsRegistry)

**Phase 2 (2026 H2)**: ReputationRegistry(ERC-8004 패턴), ERC-3643 프레임워크 설계 시작 (증권사 협의 기반)

**Phase 3 (2027.01 직전)**: RegionSTO를 ERC-3643 + Dynamic Supply로 배포, ERC-3643 하위 컨트랙트 구현, STOPortfolio 경량화, 증권사와 컴플라이언스 규칙 최종 확정

**Phase 4 (2027 H2)**: CarbonBatch + VCUReference 배포, 크로스체인 고려 시 추가 표준 검토

---

*End of Analysis*
